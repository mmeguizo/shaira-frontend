<div class="container">
  <div class="header">
    <h1>Cease-and-Desist Intake Form</h1>
    <p>Please fill out the form below to get started. We're here to help!</p>
  </div>

  <div class="progress-bar">
    <!-- Previous steps completed -->
    <div class="step completed" *ngFor="let step of [1, 2, 3, 4, 5, 6]">
      <div class="step-number"><span></span></div>
      <div class="step-label">{{ getStepLabel(step) }}</div>
    </div>
    <!-- Current step -->
    <div class="step active">
      <div class="step-number">7</div>
      <div class="step-label">Power of Attorney</div>
    </div>
    <!-- Remaining step -->
    <div class="step">
      <div class="step-number">8</div>
      <div class="step-label">Final Confirmation</div>
    </div>
  </div>

  <div class="form-container">
    <div class="form-section">
      <h2>Power of Attorney (if applicable) and Next of Kin</h2>
      <form [formGroup]="poaForm">
        <!-- POA Question -->
        <div class="form-group">
          <label>Do you have a Power of Attorney (POA) for financial or legal matters?</label>
          <div class="radio-group">
            <div class="radio-option" [class.selected]="poaForm.get('hasPoa')?.value === 'YES'">
              <input type="radio" id="poaYes" formControlName="hasPoa" value="YES" />
              <label for="poaYes">YES</label>
            </div>
            <div class="radio-option" [class.selected]="poaForm.get('hasPoa')?.value === 'NO'">
              <input type="radio" id="poaNo" formControlName="hasPoa" value="NO" />
              <label for="poaNo">NO</label>
            </div>
          </div>
        </div>

        <!-- POA Information -->
        <div class="poa-info" formGroupName="poaInfo">
          <!-- <div class="poa-info" *ngIf="poaForm.get('hasPoa')?.value === 'YES'" formGroupName="poaInfo"> -->
          <h3>If Yes, please provide the following information</h3>
          <div class="form-group">
            <label>Name of Attorney-in-Fact</label>
            <input
              type="text"
              formControlName="fullName"
              placeholder="Full Name"
              [class.invalid]="isFieldInvalid('poaInfo', 'fullName')"
            />
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Mobile Number</label>
              <div class="phone-input">
                <div class="country-code">
                  <select formControlName="countryCode">
                    <option *ngFor="let country of countries" [value]="country.code">
                      {{ country.name }} +{{ country.dial_code }}
                    </option>
                  </select>
                </div>
                <input
                  type="tel"
                  formControlName="phoneNumber"
                  placeholder="Phone number"
                  [class.invalid]="isFieldInvalid('poaInfo', 'phoneNumber')"
                />
              </div>
            </div>
            <div class="form-group">
              <label>Email Address</label>
              <input
                type="email"
                formControlName="email"
                placeholder="Email Address"
                [class.invalid]="isFieldInvalid('poaInfo', 'email')"
              />
            </div>
          </div>

          <div class="form-group">
            <label>Relationship to You</label>
            <input
              type="text"
              formControlName="relationship"
              placeholder="Relationship"
              [class.invalid]="isFieldInvalid('poaInfo', 'relationship')"
            />
          </div>
        </div>

        <!-- Next of Kin Information -->
        <div class="next-of-kin" formGroupName="nextOfKin">
          <h3>Next of Kin</h3>
          <div class="form-group">
            <label>Full Name</label>
            <input type="text" formControlName="fullName" placeholder="Full Name" />
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Mobile Number</label>
              <div class="phone-input">
                <div class="country-code">
                  <select formControlName="countryCode">
                    <option *ngFor="let country of countries" [value]="country.code">
                      {{ country.name }} +{{ country.dial_code }}
                    </option>
                  </select>
                </div>
                <input type="tel" formControlName="phoneNumber" placeholder="Phone number" />
              </div>
            </div>
            <div class="form-group">
              <label>Email Address</label>
              <input type="email" formControlName="email" placeholder="Email Address" />
            </div>
          </div>

          <div class="form-group">
            <label>Relationship to You</label>
            <input type="text" formControlName="relationship" placeholder="Relationship" />
          </div>

          <div class="form-group">
            <label>Address</label>
            <input type="text" formControlName="street" placeholder="Street Address" />
          </div>

          <div class="form-row">
            <div class="form-group">
              <input type="text" formControlName="apartment" placeholder="Apartment number" />
            </div>
            <div class="form-group">
              <input type="text" formControlName="city" placeholder="City" />
            </div>
            <div class="form-group">
              <input type="text" formControlName="state" placeholder="State/Province" />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <input type="text" formControlName="country" placeholder="Country" />
            </div>
            <div class="form-group">
              <input type="text" formControlName="zipCode" placeholder="Zip Code" />
            </div>
          </div>
        </div>

        <!-- Navigation Buttons -->
        <div class="btn-navigation">
          <button type="button" class="btn btn-back" (click)="navigateBack()">
            <span class="icon">←</span> Back
          </button>
          <button type="button" class="btn btn-primary" (click)="navigateNext()">
            Next <span class="icon">→</span>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
