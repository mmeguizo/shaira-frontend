<div class="container">
  <div class="header">
    <h1>Cease-and-Desist Intake Form</h1>
    <p>Please fill out the form below to get started. We're here to help!</p>
  </div>

  <div class="progress-bar">
    <div class="step active">
      <div class="step-number"><span>1</span></div>
      <div class="step-label">Client Information</div>
    </div>
    <div class="step">
      <div class="step-number"><span>2</span></div>
      <div class="step-label">Employer Information</div>
    </div>
    <div class="step">
      <div class="step-number"><span>3</span></div>
      <div class="step-label">Equifax Credit Report</div>
    </div>
    <div class="step">
      <div class="step-number">4</div>
      <div class="step-label">Collection Agency Details</div>
    </div>
    <div class="step">
      <div class="step-number">5</div>
      <div class="step-label">Details of Harassment</div>
    </div>
    <div class="step">
      <div class="step-number">6</div>
      <div class="step-label">Supporting Documentation</div>
    </div>
    <div class="step">
      <div class="step-number">7</div>
      <div class="step-label">Power of Attorney</div>
    </div>
    <div class="step">
      <div class="step-number">8</div>
      <div class="step-label">Final Confirmation</div>
    </div>
  </div>

  <div class="form-container">
    <div class="form-section">
      <h2>Client Information</h2>

      <div class="form-row">
        <div class="form-group">
          <label>First Name <span class="required">*</span></label>
          <input type="text" required />
        </div>
        <div class="form-group">
          <label>Middle Name</label>
          <input type="text" />
        </div>
        <div class="form-group">
          <label>Last Name <span class="required">*</span></label>
          <input type="text" required />
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Date of Birth <span class="required">*</span></label>
          <div class="date-input">
            <input 
              type="date" 
              [max]="maxDate"
              required
              (change)="onDateChange($event)"
              [formControl]="dateOfBirthControl"
            />
          </div>
          <small class="error-message" *ngIf="dateOfBirthControl.errors?.['underage'] && dateOfBirthControl.touched">
            Must be at least 18 years old
          </small>
        </div>
        <div class="form-group">
          <label>Mobile # <span class="required">*</span></label>
          <div class="phone-input">
            <div class="country-code">
              <select
              style="
                width: 140px;
                padding: 8px 4px;
                border-radius: 6px;
                border: 1px solid #cfd8dc;
                background: #f8fafc;
              "
            >
              @for (nation of nations; track nation.name) {
              <option [value]="nation.name" style="background-image: url('http://purecatamphetamine.github.io/country-flag-icons/3x2/US.svg')">
               {{nation.code | uppercase}} {{nation.dial_code}}
              </option>
              }
            </select>
            </div>
            <input type="tel" required placeholder="Phone number" />
          </div>
        </div>
        <div class="form-group">
          <label>Email Address <span class="required">*</span></label>
          <input type="email" required />
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Address <span class="required">*</span></label>
          <input type="text" placeholder="Street Address" required />
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <input type="text" placeholder="Apartment number" />
        </div>
        <div class="form-group">
          <input type="text" placeholder="City" />
        </div>
        <div class="form-group">
          <input type="text" placeholder="State/Province" />
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <input type="text" placeholder="Country" />
        </div>
        <div class="form-group">
          <input type="text" placeholder="Zip Code" />
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Attach ID <span class="required">*</span>
            <small>(e.g. Passport, Driver's License)</small></label>
          <div class="file-upload" (click)="fileInput.click()" (dragover)="onDragOver($event)" (drop)="onDrop($event)">
            <input 
              type="file" 
              #fileInput 
              style="display: none;" 
              (change)="onFileSelected($event)"
              accept=".pdf,.jpg,.jpeg,.png,.gif,.txt,.doc,.docx" 
              required
            />
            <p *ngIf="!selectedFile">Choose a file or drag and drop it here</p>
            <p *ngIf="selectedFile">Selected: {{ selectedFile.name }}</p>
            <fa-icon [icon]="faUpLong"></fa-icon>
          </div>
          <div *ngIf="selectedFile" class="file-info mt-2">
            <span class="file-name">{{ selectedFile.name }}</span>
            <button type="button" class="remove-file" (click)="removeFile($event)">✕</button>
          </div>
        </div>
      </div>

      <div class="btn-container">
        <button class="btn btn-primary" (click)="navigateToEmployerInfo()">
          Next ➔
        </button>
      </div>
    </div>
  </div>
</div>
